<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lighting - Nook Decor</title>

<style>
@font-face {
  font-family: 'DidotWeb';
  src: url('https://cdn.jsdelivr.net/gh/saif-0x/didot-webfont/Didot-Regular.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/gh/saif-0x/didot-webfont/Didot-Regular.woff') format('woff');
  font-weight: 400;
}
@font-face {
  font-family: 'DidotWeb';
  src: url('https://cdn.jsdelivr.net/gh/saif-0x/didot-webfont/Didot-Bold.woff2') format('woff2'),
       url('https://cdn.jsdelivr.net/gh/saif-0x/didot-webfont/Didot-Bold.woff') format('woff');
  font-weight: 700;
}
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

:root{
  --beige:#DFC9AB;
  --burgundy:#4b0e1f;
  --line:rgba(75,14,31,.18);
}

body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--beige);
  color:var(--burgundy);
}

header{
  background:var(--beige);
  padding:15px;
  text-align:center;
  font-size:32px;
  font-family:'DidotWeb',serif;
  font-weight:700;
  position:relative;
  border-bottom:1px solid var(--line);
}

#langSelect{
  position:absolute;
  right:20px;
  top:50%;
  transform:translateY(-50%);
  background:var(--burgundy);
  color:var(--beige);
  border:none;
  padding:8px 12px;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}

.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:30px;
  padding:30px;
  justify-items:center;
}

.item{
  background:none;
  box-shadow:none;
  padding:0;
  text-align:center;
  transition:.3s;
}

.item:hover{transform:scale(1.03);}

.item img{
  width:100%;
  max-width:350px;
  height:420px;
  object-fit:cover;
  border-radius:15px;
  display:block;
  margin:0 auto;
}

.price{
  font-size:20px;
  font-weight:bold;
  margin-top:10px;
  font-family:'DidotWeb',serif;
}

.desc{
  font-size:15px;
  color:rgba(75,14,31,.8);
  margin-top:8px;
  line-height:1.5;
  opacity:0;
  transform:translateY(10px);
  transition:.4s;
}

.item:hover .desc{
  opacity:1;
  transform:translateY(0);
}

.btn{
  background:var(--burgundy);
  color:var(--beige);
  border:none;
  padding:10px 22px;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
  margin-top:10px;
  transition:.25s;
}

.btn:hover{transform:scale(1.05);}

.back-link{
  display:block;
  text-align:center;
  margin:35px 0;
  color:var(--burgundy);
  font-weight:600;
  text-decoration:none;
}

@media(max-width:768px){
  .gallery{padding:20px 14px;}
  .item img{height:420px;}
}
</style>
</head>

<body>

<header>
Lighting
<select id="langSelect">
  <option value="en">English</option>
  <option value="ar">العربية</option>
</select>
</header>

<div class="gallery" id="productContainer"></div>

<a href="index.html" class="back-link" id="backLink">← Back to Home</a>

<script>
const products = [
  {img:"https://i.postimg.cc/SKCMGtt1/1c31540e-623d-4bee-9394-759589f8cce6.png",price:1500,desc:{en:"A warm and elegant touch in every corner.",ar:"لمسة دافئة وأنيقة في كل زاوية."}},
  {img:"https://i.postimg.cc/RVCD5ts6/f6993712-be6a-4d75-8b39-d0728d09f5e4.png",price:2200,desc:{en:"Luxurious modern lamp.",ar:"مصباح مودرن فاخر."}},
  {img:"https://i.postimg.cc/vTY3yRzD/122a3c30-72b0-4c53-8f87-4aad0d8c6268.png",price:1800,desc:{en:"Minimal artistic lighting.",ar:"إضاءة فنية بسيطة."}},
  {img:"https://i.postimg.cc/Xq1c0rqg/b387512d-d9a-4a21-9cdf-255bb1e9da06.png",price:2200,desc:{en:"Geometric modern design.",ar:"تصميم هندسي مودرن."}},
  {img:"https://i.postimg.cc/sXw5pMYv/3538f412-050a-418e-ac5b-1985e14d70cb.png",price:1800,desc:{en:"Cozy stylish lamp.",ar:"مصباح دافئ وأنيق."}},
  {img:"https://i.postimg.cc/PqMDjCFY/1ac100ea-86f3-496b-ad6f-3e4ab5826485.png",price:1500,desc:{en:"Simple & chic lighting.",ar:"إضاءة بسيطة وأنيقة."}},
  {img:"https://i.postimg.cc/02JJNWBj/02fbfcae-6a5b-42f3-9cea-dea2b0fe8a72.png",price:2000,desc:{en:"Positive energy lamp.",ar:"مصباح بطابع إيجابي."}},
  {img:"https://i.postimg.cc/4nCytGFq/e2c29b83-33a3-4b42-8ffa-52db9df24a63.png",price:2200,desc:{en:"Art meets function.",ar:"الفن مع الوظيفة."}},
  {img:"https://i.postimg.cc/1X0dfx5v/7.png",price:2000,desc:{en:"Artistic glow.",ar:"توهج فني."}},
  {img:"https://i.postimg.cc/wj4GtQgv/5.png",price:700,desc:{en:"Minimal cozy lamp.",ar:"مصباح بسيط ودافئ."}},
  {img:"https://i.postimg.cc/xjg0wvWp/re5.png",price:2000,desc:{en:"Timeless beauty.",ar:"جمال خالد."}},
  {img:"https://i.postimg.cc/nL8Z40QN/re6.png",price:2000,desc:{en:"Soft luxury lighting.",ar:"إضاءة فاخرة ناعمة."}},
  {img:"https://i.postimg.cc/D0zKvNtC/re9.png",price:1500,desc:{en:"Modern harmony.",ar:"انسجام مودرن."}},
  {img:"https://i.postimg.cc/kMWV0fyL/10.png",price:800,desc:{en:"Affordable elegance.",ar:"أناقة بسعر مناسب."}},
  {img:"https://i.postimg.cc/d0DkgFWD/3.png",price:2200,desc:{en:"Statement lamp.",ar:"مصباح مميز."}},
  {img:"https://i.postimg.cc/J0jBKQpd/2.png",price:1500,desc:{en:"Curved modern design.",ar:"تصميم منحني مودرن."}},
  {img:"https://i.postimg.cc/rFv73zFR/yyyyshs.png",price:2000,desc:{en:"Contemporary style.",ar:"ستايل معاصر."}},
  {img:"https://i.postimg.cc/44Hvm6Q5/1.png",price:2500,desc:{en:"High-end lighting.",ar:"إضاءة فاخرة."}},
  {img:"https://i.postimg.cc/LszfF3Q2/11.png",price:2500,desc:{en:"Luxury chandelier.",ar:"ثريا فاخرة."}},
  {img:"https://i.postimg.cc/nLVYzN06/6.png",price:800,desc:{en:"Minimal chandelier.",ar:"ثريا بسيطة."}},
  {img:"https://i.postimg.cc/pT69P66q/9.png",price:700,desc:{en:"Wall light decor.",ar:"إضاءة حائط."}},
  {img:"https://i.postimg.cc/C1NNJSdJ/8.png",price:400,desc:{en:"Sleek wall light.",ar:"إضاءة حائط أنيقة."}},
  {img:"https://i.postimg.cc/g0htVCvR/7.png",price:500,desc:{en:"Decorative wall light.",ar:"أبليك ديكوري."}},
  {img:"https://i.postimg.cc/13tLq7CC/5.png",price:250,desc:{en:"Compact wall light.",ar:"أبليك صغير."}}
];

/* ✅ CART UNIFIED (same as moods/space packages) */
const CART_KEY = "nook_cart";

function safeParse(v){
  try { return JSON.parse(v); } catch(e){ return null; }
}
function getCart(){
  const data = safeParse(localStorage.getItem(CART_KEY));
  return Array.isArray(data) ? data : [];
}
function saveCart(cart){
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
  localStorage.setItem("cartItems", JSON.stringify(cart)); // for checkout
}
function makeId(category, idx, price, img){
  return `${category}__${idx}__${price}__${img}`.toLowerCase().trim()
    .replace(/\s+/g,"_").replace(/[^\w\-]+/g,"");
}

function attachCart(lang){
  document.querySelectorAll(".add-to-cart").forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const item = btn.closest(".item");

      const name = item.dataset.name || (lang==="ar" ? "إضاءة" : "Lighting");
      const price = Number(item.dataset.price) || 0;
      const img = item.dataset.img || "";
      const category = "Lighting";
      const id = item.dataset.id || makeId(category, "x", price, img);

      let cart = getCart();
      let existing = cart.find(p => p.id === id);

      if(existing) existing.qty = (Number(existing.qty) || 1) + 1;
      else {
        cart.push({
          id,
          name,
          price,
          qty: 1,
          img,
          category,
          page: location.pathname,
          addedAt: new Date().toISOString()
        });
      }

      saveCart(cart);

      btn.innerText = (lang==="ar") ? "تم الإضافة!" : "Added!";
      btn.style.background = "#fff";
      btn.style.color = "#4b0e1f";

      setTimeout(()=>{
        btn.innerText = (lang==="ar") ? "أضف إلى السلة" : "Add to Cart";
        btn.style.background = "var(--burgundy)";
        btn.style.color = "var(--beige)";
      }, 1200);
    });
  });
}

function renderProducts(lang){
  const c=document.getElementById("productContainer");
  c.innerHTML="";
  products.forEach((p, idx)=>{
    const d=document.createElement("div");
    d.className="item";

    // ✅ اسم ثابت بدل ما يبقى الوصف (عشان مايلخبطش الكارت)
    const productName = (lang==="ar") ? `إضاءة رقم ${idx+1}` : `Lighting Item ${idx+1}`;
    const id = makeId("lighting", idx+1, p.price, p.img);

    d.dataset.id = id;
    d.dataset.name = productName;
    d.dataset.price = p.price;
    d.dataset.img = p.img;

    d.innerHTML=`
      <img src="${p.img}">
      <div class="price">${p.price} EGP</div>
      <p class="desc">${p.desc[lang]}</p>
      <button class="btn add-to-cart">${lang==="ar"?"أضف إلى السلة":"Add to Cart"}</button>
    `;
    c.appendChild(d);
  });

  attachCart(lang);
}

document.getElementById("langSelect").addEventListener("change",e=>{
  const lang=e.target.value;
  document.body.dir=lang==="ar"?"rtl":"ltr";
  document.getElementById("backLink").textContent=lang==="ar"?"← العودة للرئيسية":"← Back to Home";
  renderProducts(lang);
});

renderProducts("en");
</script>

</body>
</html>
